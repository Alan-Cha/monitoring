---

copyright:
  years: 2018
lastupdated: "2018-12-03"

---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:pre: .pre}
{:table: .aria-labeledby="caption"}
{:codeblock: .codeblock}
{:tip: .tip}
{:download: .download}

# Customizing the Linux and container Sysdig agents
{: #change_agent}

By default, the Sysdig agent collects data from a range of platforms and applications. You can edit the agent config file to change its default behavior, and include or exclude data. You can customize the Sysdig agent configuration file to include custom metrics such as JMX, StatsD, and Prometheus. You also can filter out metrics and containers.
{:shortdesc}

The Sysdig agent uses two configuration files that specify what data to collect automatically:

| File                   | Description                                                     | Location                                |
|------------------------|-----------------------------------------------------------------|-----------------------------------------|
| `dragent.default.yaml` | Main configuration file </br>**Note:****Do not edit this file.  | `/opt/draios/etc/dragent.default.yaml`  |
| `dragent.yaml`         | Configuration file that you edit to customize the Sysdig agent. | `/opt/draios/etc/dragent.yaml`          |
{: caption="Table 1. Sysdig agent configuration files" caption-side="top"} 

You can edit the *dragent.yaml* file to customize the data that is collected. Changes take effect immediately after you save the file. The agent detects the change and automatically restarts. You can find the frequency and the files that a Sysdig agent checks in the *dragent.default.yaml* file.

For example, a *dragent.default.yaml* includes the following information:

```
check_frequency_s: 5
files:
- /opt/draios/etc/dragent.yaml
- /opt/draios/etc/kubernetes/config/dragent.yaml
- /opt/draios/etc/kubernetes/secrets/access-key
```
{: screen}



## Editing the dragent yaml file
{: #edit_agent}

The yaml file is loacated in */opt/draios/etc/*.

Complete the following steps to edit the file and apply the changes:

1. Access the *dragent.yaml* directly at `/opt/draios/etc/dragent.yaml`.
2. Edit the file. Use YAML systax.
3. Restart the agent. 

    Run the following command for a Linux agent:

    ```
    service dragent restart
    ```
    {: codeblock}

    Run the following command for a container agent:

    ```
    docker restart sysdig-agent
    ```
    {: codeblock}


## Blocking ports
{: #ports}

To block network traffic and metrics from network ports, you must customize the **blacklisted_ports** section in the *dragent.yaml* file. You must list the ports from which you want to filter out any data.

**Note:** Port 53 (DNS) is always blacklisted. 

For example, the following sample shows how to set the *blacklisted_ports* section of a Sysdig agent to exclude data coming from ports 6666 and 6379:

```
blacklisted_ports:
    - 6666
    - 6379
```
{: screen}









## Filtering designated containers
{: #containers}

By default, a Sysdig agent will collect metrics from all containers it detects in an environment. However, as of agent version 0.86, it is possible to exclude designed containers from metrics collection. This can help reduce agent and backend load by not monitoring unnecessary containers, or-- if encountering backend limits for containers-- you can filter to ensure that the important containers are always reported on.

This feature affects the monitoring of all the processes/metrics within a container, including Prometheus, StatsD, JMX, app-checks, and built-in metrics.




## Agent auto-config
{: #auto_config}

Agent Auto-Config: Describes how to use the Sysdig REST APIs and Python client wrappers to auto-orchestrate changes to all agents in an environment, in the (rare) situation in which a standard orchestration tool such as Kubernetes, Chef, or Ansible is not being used. 

